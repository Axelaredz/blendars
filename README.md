# Кооперативная песочница на Godot 4.6 + Nakama

Этот проект представляет собой базовую архитектуру для кооперативной песочницы с использованием Godot 4.6 и Nakama. Включает в себя систему авторизации, лобби, матчмейкинг и сетевое взаимодействие.

## Структура проекта

```
/
├── client/                 # Клиентская часть игры
│   ├── autoload/          # Глобальные синглтоны
│   │   ├── network_manager.gd
│   │   ├── nakama_client.gd
│   │   └── nakama_socket.gd
│   ├── scenes/            # Игровые сцены
│   │   └── lobby/
│   │       └── lobby.tscn
│   └── scripts/           # Скрипты для различных систем
│       ├── lobby/
│       │   ├── lobby_manager.gd
│       │   └── lobby_ui.gd
│       └── network/
│           └── matchmaker.gd
├── server/                # Серверная логика на Go
│   ├── main.go
│   └── modules/
│       └── lobby/
│           └── lobby_system.go
├── shared/                # Общие ресурсы между клиентом и сервером
├── addons/                # Дополнения для Godot
├── .gitignore
├── qwen.md               # Файл с описанием архитектуры для ИИ
└── README.md             # Этот файл
```

## Технологии

- **Godot 4.6** - игровой движок
- **Nakama** - бэкенд для многопользовательских игр
- **GDScript** - язык программирования для скриптов в Godot
- **Go** - язык для серверной логики
- **Docker** - для контейнеризации и деплоя

## Архитектура

### Клиентская часть

- **NetworkManager** - основной синглтон для управления сетевым подключением
- **NakamaClient** - клиент для взаимодействия с Nakama API через HTTP
- **NakamaSocket** - WebSocket соединение для реального времени
- **LobbyManager** - управление лобби (создание, присоединение, выход)
- **LobbyUI** - пользовательский интерфейс лобби
- **Matchmaker** - система подбора игроков по параметрам

### Серверная часть

- **main.go** - точка входа серверной части
- **lobby_system.go** - реализация системы лобби на стороне сервера

## Запуск проекта

### Предварительные требования

- Godot 4.6
- Nakama сервер
- Go (для сборки серверной части)

### Установка и запуск

1. Установите Godot 4.6
2. Запустите Nakama сервер
3. Откройте проект в Godot
4. Запустите игру

Для запуска серверной части:

1. Установите Go
2. Перейдите в директорию `/server`
3. Выполните `go build` для компиляции
4. Запустите исполняемый файл

## Особенности реализации

- Все клиентские скрипты написаны на GDScript
- Серверная логика реализована на Go
- Используется RPC для взаимодействия между клиентом и сервером
- WebSocket для реального времени
- Система лобби позволяет создавать и присоединяться к играм
- Матчмейкинг позволяет находить игры по параметрам
