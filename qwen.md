# Описание проекта Godot "Yet Another Roguelike"

## Общая информация
"Yet Another Roguelike" - это 3D roguelike игра, разработанная с использованием игрового движка Godot 4.6. Проект представляет собой образец современной архитектуры для многопользовательской roguelike игры с интеграцией облачного бэкенда Nakama от Heroic Labs.

## Архитектура проекта

### Структура папок
```
├── addons/                 # Дополнительные аддоны
│   └── com.heroiclabs.nakama/  # Официальный Nakama плагин
├── assets/                 # Ассеты игры (спрайты, звуки и т.д.)
├── client/                 # Клиентская логика
│   ├── autoload/           # Автозагружаемые узлы
│   │   ├── nakama_client.gd # Клиент Nakama
│   │   ├── nakama_socket.gd # Сокет соединение
│   │   └── game_manager.gd  # Менеджер игры
│   ├── scenes/             # Сцены клиентской части
│   │   ├── main.tscn       # Главная сцена
│   │   └── player.gd       # Логика игрока
│   └── scripts/            # Клиентские скрипты
├── server/                 # Серверная логика
│   ├── db/                 # Файлы базы данных
│   │   └── nakama.sqlite     # SQLite база данных
│   ├── data/               # Конфигурационные файлы
│   │   ├── certs/          # SSL сертификаты
│   │   ├── modules/        # Модули сервера
│   │   └── resources/      # Ресурсы сервера
│   └── schemas/            # Схемы базы данных
└── shared/                 # Общие скрипты между клиентом и сервером
    ├── player_data.gd      # Данные игрока
    ├── game_constants.gd   # Константы игры
    └── utils/              # Вспомогательные утилиты
```

### Ключевые компоненты

#### Клиентская часть
- **Main.tscn**: Главная сцена игры, содержит основной узел и менеджеры
- **Player.gd**: Контроллер игрока с физикой и анимацией
- **Game Manager**: Центральный узел управления состоянием игры
- **Nakama Client**: Интеграция с облачным бэкендом для аутентификации и хранения прогресса
- **Networking**: Поддержка мультиплеера через Nakama

#### Серверная часть
- **Nakama Server**: Облачный бэкенд для аутентификации, хранения данных и мультиплеера
- **База данных**: SQLite для хранения данных пользователей и прогресса
- **Регистрация RPC**: Маршруты для вызова удаленных процедур
- **Состояния сессии**: Управление игровыми сессиями и состоянием игроков

## Игровые механики

### Основные особенности
- Генерация процедурных уровней
- Система улучшений и навыков
- Многопользовательский режим
- Сохранение прогресса в облаке
- Асинхронная синхронизация между клиентом и сервером

### Управление
- WASD или стрелки для движения
- Мыши для прицеливания и атаки
- Пробел для активации специальных способностей

## Технические детали

### Используемые технологии
- Godot Engine 4.6
- Nakama Server от Heroic Labs
- SQLite для локального кэширования
- GDScript как основной язык программирования

### Системные требования
- Godot 4.6 или выше
- Современный браузер (для веб-версии)
- Подключение к интернету (для мультиплеера и облачного сохранения)

## Запуск проекта

### Предварительные условия
1. Установлен Godot 4.6
2. Запущенный Nakama сервер (локально или удаленно)

### Запуск клиента
1. Открыть проект в Godot Editor
2. Запустить main.tscn
3. Игра начнется с главного экрана

### Запуск сервера
1. Установить Nakama сервер согласно документации
2. Настроить конфигурацию в соответствии с файлами в server/
3. Запустить сервер командой `nakama run`

## Конфигурация Nakama

### Аутентификация
- Поддержка аутентификации через устройство, email и username
- Управление сессиями через JWT токены
- Обновление токенов по необходимости

### Хранение данных
- Прогресс игрока хранится в облаке
- Использование хранилища Nakama для сохранения состояния
- Синхронизация между устройствами

### Мультиплеер
- Поддержка совместной игры в реальном времени
- Синхронизация состояния между игроками
- Управление матчем через Nakama

## Разработка

### Добавление новых функций
1. Создать новую сцену в client/scenes/
2. Реализовать логику в соответствующих скриптах
3. При необходимости добавить RPC вызовы на сервер
4. Обновить документацию

### Тестирование
- Использовать автотесты для проверки критических путей
- Тестировать мультиплеер на нескольких клиентах
- Проверять восстановление после потери соединения

## Деплоймент

### Для разработки
- Локальный запуск клиента и сервера
- Использование тестового окружения

### Для продакшена
- Настройка облачного Nakama сервера
- Конфигурация SSL сертификатов
- Оптимизация производительности

## Авторы
- Qwen - архитектура и реализация
- Другие участники - контент и тестирование

## Лицензия
MIT License - см. файл LICENSE для подробностей.